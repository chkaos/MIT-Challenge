# 1. Networks

### connectivity
Internet的连接能力是指两台计算机互相连接并可以传输数据, 抽象来看就是两个应用之间的管道


### World Wide Web(HTTP)
HTTP是一个客户端（用户）和服务端（网站）之间请求和应答的标准，通常使用TCP协议。
- document-centric: 以文件为主

## 应用
### Network Applications
- 两台本地电脑通过网络读写数据
- dominant model: 双向可靠字节流连接
  - 一方读另一方写
  - 操作是双向的
  - 可靠(除非网络断开)
### BitTorrent
允许人们分享交换大文件, 不像 web里client从服务器请求文件, BitTorrent是客户从其他客户那里请求文件;

文件以切块形式存在

swarm(虫群?) - 分享同个种子的一群客户端

下载的时候需要一个 Torrent file, 描述了想要下载的文件信息

tracker: 持续记录 clients of the swarm

### skype
两台电脑互相请求数据
NAT（Network Address Translation，网络地址转换）: 在计算机网络中是一种在IP数据包通过路由器或防火墙时重写来源IP地址或目的IP地址的技术。这种技术被普遍使用在有多台主机但只通过一个公有IP地址访问互联网的私有网络中。它是一个方便且得到了广泛应用的技术。当然，NAT也让主机之间的通信变得复杂，导致了通信效率的降低。个人电脑常用;

一个Client behind NAT: 使用 Rendezvous server 跳过 NAT的限制, 另一个Client则直接发送数据至 Rendezvous server;
both clients behind NAT: Relay Server

## 4层模型
这里主要介绍 TCP/IP 4层模型

![TCP/IP4层模型]("~@assets/80/layerModel.jpg")

- 7层协议是指OSI七层协议模型，主要是：应用层（Application）、表示层（Presentation）、会话层（Session）、传输层（Transport）、网络层（Network）、数据链路层（Data Link）、物理层（Physical）

Each layer provide a services to the layer above.

### Link Layer: (Etherent, Wifi, DSL, 4G)

数据包（英语：Data packet），又称分组，是在分组交换网络中传输的格式化数据单位。

一个数据包（packet）分成两个部分，包括控制信息，也就是表头资料（header），和资料本身，也就是负载（payload）。header 一般包含寄件人和收件人的信息;

我们可以将一个数据包比作为一封信，表头资料相当于信封，而数据包的数据部分则相当于信的内容。和信不同的是，有时候一个大数据包可以分成多个小数据包。

###  Network: Internet Protocol(IP)
- IP 传递数据报(无保证)
- 数据报存在无序和丢失的问题
- 提供 unreliable datagram delivery service

### Transport: 最常见的传输协议为 TCP (Transmission control protocol), 用于解决网络层传输数据包无序和丢失的问题;
- 为应用层提供保证数据报顺序及重新发送的服务

不是所有应用都需要"数据顺序保证"
- UDP(用户数据报协议, User datagram protocol)
> UDP只提供数据的不可靠传递，它一旦把应用程序发给网络层的数据发送出去，就不保留数据备份（所以UDP有时候也被认为是不可靠的数据报协议）。UDP在IP数据报的头部仅仅加入了复用和数据校验字段。

UDP适用于不需要或在程序中执行错误检查和纠正的应用，它避免了协议栈中此类处理的开销。对时间有较高要求的应用程序通常使用UDP，因为丢弃数据包比等待或重传导致延迟更可取。

-RTP(Real time protocol) 等其他

### Application layer
http, smtp, ssh, ftp ...

## IP服务模型
IP 在互联网中属于"瓶颈", 不可避免的一环. IP服务模型一个很好的比喻是邮局服务
- Datagram
- Unreliable
- Best effort
- Connectionless: 无连接式通信，又译为免接式通信，一种通信传输模式，使用于电信及电脑网络中。在两个端点之间传递的消息，不需要事先安排，创建连线。

- Simple, dumb, minimal: Faster, more streamlined and lower cost to build and maintain;