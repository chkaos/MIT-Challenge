(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{439:function(t,a,e){"use strict";e.r(a);var r=e(45),s=Object(r.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"_20-thread-safety"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_20-thread-safety"}},[t._v("#")]),t._v(" 20.Thread Safety")]),t._v(" "),e("p",[t._v("在共享内存并发中，基本上有四种方法可以确保变量访问安全：")]),t._v(" "),e("ul",[e("li",[t._v("限制。不在线程之间共享数据。")]),t._v(" "),e("li",[t._v("不变性。共享，但保持数据不可变")]),t._v(" "),e("li",[t._v("线程安全数据类型。将共享数据封装在现有的线程安全数据类型中，该类型可进行协调。")]),t._v(" "),e("li",[t._v("同步。使用同步防止线程同时访问变量。同步是构建自己的线程安全数据类型所需的")])]),t._v(" "),e("h3",{attrs:{id:"线程安全的含义"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#线程安全的含义"}},[t._v("#")]),t._v(" 线程安全的含义")]),t._v(" "),e("p",[t._v("A data type or static method is threadsafe if it behaves correctly when used from multiple threads, regardless of how those threads are executed, and without demanding additional coordination from the calling code.")]),t._v(" "),e("h3",{attrs:{id:"confinement-限制"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#confinement-限制"}},[t._v("#")]),t._v(" Confinement 限制")]),t._v(" "),e("p",[t._v("Our first way of achieving thread safety is confinement . Thread confinement is a simple idea: you avoid races on mutable data by keeping that data confined to a single thread. Don’t give any other threads the ability to read or write the data directly.\n变量存在单一线程， 其他线程不允许读写")]),t._v(" "),e("p",[t._v("避免全局变量")]),t._v(" "),e("h3",{attrs:{id:"不变性"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#不变性"}},[t._v("#")]),t._v(" 不变性")]),t._v(" "),e("p",[t._v("实现线程安全的第二种方法是使用不可变引用和数据类型。不变性解决了场条件的共享可变数据原因，只需使共享数据不可变来解决它。")]),t._v(" "),e("h3",{attrs:{id:"线程安全数据类型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#线程安全数据类型"}},[t._v("#")]),t._v(" 线程安全数据类型")]),t._v(" "),e("p",[t._v("实现线程安全的第三个主要策略是将共享的可变数据存储在现有的线程安全数据类型中。")]),t._v(" "),e("h3",{attrs:{id:"线程安全验证"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#线程安全验证"}},[t._v("#")]),t._v(" 线程安全验证")]),t._v(" "),e("h3",{attrs:{id:"概要"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#概要"}},[t._v("#")]),t._v(" 概要")]),t._v(" "),e("ul",[e("li",[t._v("远离错误: 我们试图消除一类主要的并发错误，线程竞争，从设计层面消除它们，而不仅仅是偶然。")]),t._v(" "),e("li",[t._v("易于理解: 应用这些通用的、简单的设计模式比关于哪些线程交错是可能的和哪些不是的复杂论点更容易理解。")]),t._v(" "),e("li",[t._v("准备改变: 我们在线程安全参数中显式写下这些理由，以便维护程序员知道代码对线程安全性所依赖的是什么。")])])])}),[],!1,null,null,null);a.default=s.exports}}]);